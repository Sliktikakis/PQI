<% provide(:title, @usager.nom) %>

<h1>Modification des informations de <%= "#{@usager.sexe} #{@usager.nom} #{@usager.prenom}" %></h1>

<%= simple_form_for(@usager) do |f| %>

<h2 class="text-center form-inline">
  <%= f.check_box :pqi, class: 'form-control' %>
  <%= f.label :pqi, "PQI" %>
</h2>

<h2 class="text-center form-inline">
  <br><%= f.label :groupe_nom, "Groupe" %>
  <%= f.text_field :groupe_nom, data: {autocomplete_source: Groupe.order(:nom).map(&:nom)}, class: 'form-control' %>
</h2>


<div id="accordion">

  <h3>Identité</h3>

  <div>
    <div class="text-center form-inline">
      <%= f.radio_button :sexe, "Mr", class: 'form-control' %>
      <%= f.label :sexe_m, "Mr" %>

      <%= f.radio_button :sexe, "Mme", class: 'form-control' %>
      <%= f.label :sexe_f, "Mme" %>
    </div>

    <div class="text-center form-inline">
      <%= f.text_field :nom, class: 'form-control', title: 'Nom' %>

      <%= f.text_field :prenom, class: 'form-control', title: 'Prénom' %>
    </div>
  </div>


  <h3>Informations générales</h3>

  <div>
    <table class="table-responsive text-center">
      <tr class="table_head">
        <th class="ville">Ville</th>
        <th class="adresse">Adresse</th>
        <th class="comp_adr">Complément d'adresse</th>
        <th class="date_naissance">Date de naissance</th>
        <th class="tel">Téléphone</th>
      </tr>
      <tr id="usager-<%= @usager.id %>">
        <td class="ville"><%= f.select :ville, @villes, prompt: "Choisissez une ville", class: 'form-control' %></td>
        <td class="adresse"><%= f.text_field :adresse, class: 'form-control' %></td>
        <td class="comp_adr"><%= f.text_field :adresse_précis, class: 'form-control' %></td>
        <td class="date_naissance"><%= f.input :date_naissance, label: false, :as => :date_picker, input_html: {value: @usager.date_naissance}, class: 'form-control' %></td>
        <td class="tel"><%= f.text_field :tel, class: 'form-control' %></td>
      </tr>
    </table>
  </div>


  <h3>Enfants</h3>

  <div>
    <ul id="enfants">
      <%= f.simple_fields_for :enfants do |enf| %>
        <li><%= render 'enfant_fields', f: enf %></li>
      <% end %>
      <%= link_to_add_association 'Ajouter un enfant', f, :enfants, class: 'links btn btn-primary' %>
    </ul>
  </div>

  <h3>Groupe</h3>

  <div>
    
  </div>


  <h3>PQI</h3>

  <div>
    <%= f.label :notes, "Observations" %>
    <%= f.text_field :notes, class: 'form-control' %>
  </div>
</div>

<hr>

<%= f.submit "Enregistrer les modifications", class: "btn btn-primary" %>

<% end %>